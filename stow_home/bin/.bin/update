#!/usr/bin/env bash
#    _   _          _   _
#   | | | |        | | | |
#   | | | |_      _| | | |
#   | | | \ \ /\ / / | | |
#   | |_| |\ V  V /| |_| |
#    \___/  \_/\_/  \___/
#
#   Info:
#   ProLifeTip  "Drink Water"
#   Gitea       "https:gitea.thebigowo.xyz/julia"
#   GitLab      "https://gitlab.com/thebigowo/"
#   Mastodon    "https://mastodon.thebigowo.xyz/@julia"
#

test='echo "working" '

arch ()
{
    read  -p  "Do you want to update pacman and aur packages (y/N)" pamaur
    if [[ $pamaur == y ]] ; then
        yay -Syu --answerclean ALL --noconfirm
        echo "Done pacman + aur updates"
        return
    fi
}

debian ()
{
    read  -p "Do you want to update deb(apt) packages (y/N)" deb
    if [[ $deb == y ]] ; then
        sudo apt update
        sudo apt upgrade -y
        return
    fi
}

fedora ()
{
    read  -p "Do you want to update rpm (dnf) packages (y/N)" dnf
    if [[ $dnf == y ]] ; then
        sudo dnf update -y
        return
    fi
}

opensuse ()
{
    read  -p "Do you want to update zypper packages (y/N)" zypper
    if [[ $zypper == y ]] ; then
        sudo zypper update -y
        return
    fi
}

flatpak ()
{
    read  -p  "Do you want to update flatpak packages (y/N)" flat
    if [[ $flat == y ]] ; then
        sudo flatpak update -y
        echo "Done flatpak updates"
        return
    fi
}

proton-ge ()
{
    read  -p "Do you want to update proton-ge-custom (y/N)" proge
    if [[ $proge == y ]] ; then
        bash -C "$HOME/.bin/proton-ge"
        echo "Done updating proton-ge-custom"
        return

    fi
}

proton-db ()
{
    read  -p "Do you want to update protondb ratings (y/N)" prodb
    if [[ $prodb == y ]] ; then
        python3 $HOME/.bin/proton-db-tags --check-native || \
            echo "protondb tags dependanceys" ; \
            curl "https://raw.githubusercontent.com/CorruptComputer/ProtonDB-Tags/master/requirements.txt" ; echo "python3"
        echo "Done updating protondb ratings"
        return
    fi
}

distropick ()
{
    read  -p "Are you using Arch(a), Debian(d), Fedora(f) or OpenSUSE (a,d,f,s)" distro
    if [[ $distro == a ]] ; then
        arch
    elif [[ $distro == d ]] ; then
        debian
    elif [[ $distro == f ]] ; then
        fedora
    elif [[ $distro == s ]] ; then
        opensuse
    else
        echo "Please try agian"
        exit 1
    fi
}

distropick
sleep 0.5s
flatpak
sleep 0.5s
proton-ge
sleep 0.5s
proton-db
sleep 0.5s
echo "Done updating!"
